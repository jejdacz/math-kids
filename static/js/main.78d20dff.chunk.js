(this["webpackJsonpmath-kids"]=this["webpackJsonpmath-kids"]||[]).push([[0],{331:function(e,n,t){},332:function(e,n,t){},333:function(e,n,t){"use strict";t.r(n);var a=t(3),r=t(2),o=t.n(r),c=t(85),s=t.n(c),i=(t(95),t(5)),l=t(38),u=(t(96),function(e){var n=e.score,t=e.className;return Object(a.jsxs)("div",{className:"".concat(t||""," score-container"),children:[Object(a.jsx)("h2",{className:"score",children:n.toFixed(1)}),Object(a.jsx)("h2",{className:"score-title",children:"score"})]})}),d=t(334),f=function(e,n,t){var a=t?t(n):n,r=[];return{subscribe:function(e){return console.log("listener added"),r.push(e),function(){return r.filter((function(n){return e!==n}))}},dispatch:function(n){return a=e(a,n),r.forEach((function(e){return e()})),n},getState:function(){return a}}},m=t(89),b=[function(e){var n=Math.floor(Math.random()*e),t=Math.floor(Math.random()*e);return{problem:"".concat(n+t," - ").concat(n),answer:t}},function(e){var n=Math.floor(Math.random()*e),t=Math.floor(Math.random()*e);return{problem:"".concat(n," + ").concat(t),answer:n+t}}],p=function e(n,t){var a=n();return t.includes(a)?e(n,t):[].concat(Object(m.a)(t),[a])},j=function(e,n){return.5-Math.random()},h=function(e){for(var n=e.answersCount,t=e.limit,a=Math.floor(Math.random()*b.length),r=b[a](t),o=r.problem,c=r.answer,s=[c];s.length<n;)s=p((function(){return Math.floor(10*Math.random())}),s);return s=s.sort(j),{problem:o,correctAnswer:c,answers:s}},v=Object.freeze({intro:"intro",game:"game",over:"over",error:"error"}),g=Object.freeze({init:"init",loading:"loading",ready:"ready",running:"running",stopped:"stopped",success:"success",fail:"fail",over:"over"}),y={gameState:v.intro,initScoreUnit:10,scoreUnitReducer:.98,rounds:10,score:0,scoreUnit:10,round:1,roundState:g.init,problemSpec:{},problemOptions:{answersCount:4,limit:10}},O=function(e){return Object(i.a)(Object(i.a)({},e),{},{problemSpec:h(e.problemOptions)})},k=f((function(e,n){switch(n.type){case"startGame":return Object(i.a)(Object(i.a)({},e),{},{gameState:v.game});case"restartGame":return Object(i.a)(Object(i.a)({},O(y)),{},{gameState:v.game});case"stopRound":return Object(i.a)(Object(i.a)({},e),{},{roundState:g.stopped});case"checkAnswer":console.log(n.payload);var t=n.payload.correct;return Object(i.a)(Object(i.a)(Object(i.a)({},e),t&&{score:e.score+e.scoreUnit}),t?{roundState:g.success}:{roundState:g.fail});case"initRound":return Object(i.a)(Object(i.a)({},e),{},{round:e.round+1,roundState:g.init,scoreUnit:e.initScoreUnit,problemSpec:h(e.problemOptions)});case"startRound":return Object(i.a)(Object(i.a)({},e),{},{roundState:g.running});case"finishRound":return Object(i.a)(Object(i.a)({},e),{},{roundState:g.over},e.round===e.rounds&&{gameState:v.over});case"reduceScoreUnit":return Object(i.a)(Object(i.a)({},e),{},{scoreUnit:e.scoreUnit*e.scoreUnitReducer});default:throw Error("action type not defined")}}),y,O),S=k.dispatch,w=k.getState,x=function(){return S({type:"startGame"})},R=function(){return S({type:"restartGame"})},C=function(e){return S({type:"checkAnswer",payload:e})},M=function(){return S({type:"initRound"})},N=function(){S({type:"startRound"});var e=setInterval((function(){w().roundState!==g.running?clearInterval(e):T()}),100)},V=function(){return S({type:"stopRound"})},z=function(){return S({type:"finishRound"})},T=function(){S({type:"reduceScoreUnit"})},U=o.a.memo((function(e){var n=e.score,t=e.scoreUnit,o=e.roundState,c=e.gameState,s=e.problem,i=e.startRound,l=e.finishRound,f=e.initRound,m=Object(r.useRef)(null);return Object(r.useEffect)((function(){d.b.to(m.current,5,{transform:"scale(0.85)"})}),[c]),Object(r.useEffect)((function(){o===g.init&&(console.log("roundstate - init"),setTimeout((function(){return i()}),500)),o===g.loading&&console.log("roundstate - loading"),o===g.running&&console.log("roundstate - running"),o===g.answerPicked&&console.log("roundstate - answer picked"),o===g.fail&&(console.log("roundstate - fail"),setTimeout((function(){return l()}),1e3)),o===g.success&&(console.log("roundstate - success"),setTimeout((function(){return l()}),2e3)),o===g.over&&c===v.game&&(console.log("roundstate - over"),setTimeout((function(){return f()}),500))}),[o,c]),Object(a.jsxs)("div",{className:"app game",children:[s,Object(a.jsx)("h2",{className:"score-unit",children:t.toFixed(2)}),Object(a.jsx)(u,{score:n})]})}));U.displayName="Game";var A=U,E=t(39),G=t(34),F=t(21);function q(){var e=Object(G.a)(["\n  font: inherit;\n  font-size: 1.7rem;\n  padding: 1.2rem 1.8rem;\n  border: 0;\n  background-color: ",";\n  color: ",";\n  outline: 0;\n  border-radius: 0.5rem;\n  text-align: center;\n  user-select: none;\n\n  &:focus {\n    outline: none;\n  }\n"]);return q=function(){return e},e}var I=F.b.button(q(),(function(e){return e.theme.secondary}),(function(e){return e.theme.onSecondary}));I.defaultProps={theme:{secondary:"#fff"}};var P=I,L=function(e){var n=e.onClick,t=Object(E.a)(e,["onClick"]),o=Object(r.useRef)(null),c=new d.a;return Object(a.jsx)(P,Object(i.a)({ref:o,onClick:function(e){c.to(o.current,{duration:.1,ease:"power3.out",transform:"scale(0.75)"}).to(o.current,{duration:.2,ease:"back.out(3)",transform:"scale(1.0)"}).to(o.current,{duration:.2,transform:"scale(1.0)",onComplete:function(){return n(e)}})}},t))},B=t(36),D=t.n(B),H=t(37),J=o.a.memo((function(e){var n=e.score,t=e.restartGame;return Object(a.jsxs)("div",{className:"app over",children:[Object(a.jsx)(D.a,{style:{position:"absolute",left:"0",top:"0"},params:H}),Object(a.jsx)(u,{className:"large",score:n}),Object(a.jsx)(L,{onClick:t,className:"button-restart",children:"RESTART"})]})})),K=o.a.memo((function(e){var n=e.startGame;return Object(a.jsxs)("div",{className:"app intro",children:[Object(a.jsx)(D.a,{params:H}),Object(a.jsx)("h1",{className:"main-title",children:"MATH KIDS"}),Object(a.jsx)(L,{onClick:n,className:"button-start",children:"START"})]})}));K.displayName="Intro";var W=K,$=function(e){var n=e.startGame;return Object(a.jsxs)("div",{className:"app error",children:[Object(a.jsx)("h1",{className:"main-title",children:"MATH KIDS"}),Object(a.jsx)("p",{className:"error",children:"Something bad happened!"}),Object(a.jsx)(P,{onClick:n,className:"button-start",children:"RESTART"})]})};function Q(){var e=Object(G.a)(["\n  padding: 1rem 1.5rem;\n  margin: 0rem;\n\n  &:focus {\n    box-shadow: none;\n  }\n"]);return Q=function(){return e},e}var X=Object.freeze({ready:"ready",clicked:"clicked"}),Y=Object(F.b)((function(e){var n=e.onClickStart,t=e.onClickComplete,o=e.enabled,c=e.effect,s=Object(E.a)(e,["onClickStart","onClickComplete","enabled","effect"]),u=Object(r.useState)(X.ready),f=Object(l.a)(u,2),m=f[0],b=f[1],p=Object(r.useRef)(null),j=Object(r.useMemo)((function(){return new d.a({paused:!0})}),[]);console.log("timeline defined"),Object(r.useEffect)((function(){return console.log("gb timeline adjusted"),j.addLabel("success").to(p.current,{duration:.1,ease:"power3.out",transform:"scale(0.75)"}).to(p.current,{duration:.2,ease:"back.out(3)",transform:"scale(1.0)"}).to(p.current,{duration:.5,delay:.2,ease:"power3.out",rotation:"+=360"}).call((function(e){console.log("fail skip reached"),e.play("over")}),[j]).addLabel("fail","+=0.1").to(p.current,{duration:.03,x:"+=4",yoyo:!0,repeat:13},"fail").addLabel("over").call((function(){return console.log("over reached")}),[]).set(p.current,{x:"0",rotation:"0"},"over+=0.2"),function(){console.log("bg cleanup"),j.kill()}}),[]);return Object(a.jsx)(P,Object(i.a)({ref:p,onClick:function(e){o&&m===X.ready&&(console.log("gb clicked"),b(X.clicked),j.eventCallback("onComplete",(function(){t(e),b(X.ready)})),console.log("effect",c),j.play(c),n(e))}},s))}))(Q()),Z=(t(331),o.a.memo((function(e){var n=e.stopRound,t=e.checkAnswer,o=(e.finishRound,e.buttonsEnabled),c=e.problemSpec,s=c.problem,i=c.correctAnswer,l=c.answers;return Object(a.jsxs)(r.Fragment,{children:[Object(a.jsxs)("div",{className:"problem",children:[s," = "]}),Object(a.jsx)("div",{className:"answer-container",children:function(e,r){return r.map((function(r,c){return Object(a.jsx)(Y,{onClickStart:n,onClickComplete:r===e?function(){return t({answer:r,correct:!0})}:function(){return t({answer:r,correct:!1})},enabled:o,effect:r===e?"success":"fail",children:r},c)}))}(i,l)})]})})));Z.displayName="Problem";var _=Z,ee=(t(332),function(){var e=Object(r.useState)(k.getState()),n=Object(l.a)(e,2),t=n[0],o=n[1];Object(r.useEffect)((function(){var e=k.subscribe((function(){return o(k.getState())}));return function(){e()}}),[]);var c=t.score,s=t.scoreUnit,u=t.roundState,d=t.gameState,f=t.problemSpec,m=u===g.running,b=Object(a.jsx)(_,Object(i.a)({},{buttonsEnabled:m,problemSpec:f,stopRound:V,checkAnswer:C,finishRound:z}));return function(){switch(t.gameState){case v.intro:return Object(a.jsx)(W,Object(i.a)({},{startGame:x}));case v.game:return Object(a.jsx)(A,{score:c,scoreUnit:s,roundState:u,gameState:d,problem:b,startRound:N,finishRound:z,initRound:M});case v.over:return Object(a.jsx)(J,Object(i.a)({},{restartGame:R,score:c}));default:return Object(a.jsx)($,Object(i.a)({},{startGame:x}))}}()});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ne=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,335)).then((function(n){var t=n.getCLS,a=n.getFID,r=n.getFCP,o=n.getLCP,c=n.getTTFB;t(e),a(e),r(e),o(e),c(e)}))},te={primary:"#3982c1",secondary:"#FF69B4",bacground:"#c4f2ff",onPrimary:"#ffffff",onSecondary:"#ffffff",onBackground:"#000000"};s.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(F.a,{theme:te,children:Object(a.jsx)(ee,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),ne()},37:function(e){e.exports=JSON.parse('{"autoPlay":true,"background":{"color":{"value":"#c4f2ff"},"image":"","position":"","repeat":"","size":"","opacity":1},"backgroundMask":{"composite":"destination-out","cover":{"color":{"value":"#fff"},"opacity":1},"enable":false},"backgroundMode":{"enable":true,"zIndex":-1},"detectRetina":true,"fpsLimit":60,"infection":{"cure":false,"delay":0,"enable":false,"infections":0,"stages":[]},"interactivity":{"detectsOn":"window","events":{"onClick":{"enable":false,"mode":[]},"onDiv":{"selectors":[],"enable":false,"mode":[],"type":"circle"},"onHover":{"enable":false,"mode":"trail","parallax":{"enable":false,"force":2,"smooth":10}},"resize":true},"modes":{"attract":{"distance":200,"duration":0.4,"speed":1},"bounce":{"distance":200},"bubble":{"distance":200,"duration":0.4},"connect":{"distance":80,"links":{"opacity":0.5},"radius":60},"grab":{"distance":100,"links":{"blink":false,"consent":false,"opacity":1}},"light":{"area":{"gradient":{"start":{"value":"#ffffff"},"stop":{"value":"#000000"}},"radius":1000},"shadow":{"color":{"value":"#000000"},"length":2000}},"push":{"quantity":4},"remove":{"quantity":2},"repulse":{"distance":200,"duration":0.4,"speed":1},"slow":{"factor":3,"radius":200},"trail":{"delay":0.005,"quantity":5,"particles":{"color":{"value":"#ff0000","animation":{"enable":true,"speed":400,"sync":true}},"collisions":{"enable":false,"bounce":{"horizontal":{"random":{}},"vertical":{"random":{}}}},"links":{"enable":false,"shadow":{},"triangles":{}},"move":{"outMode":"destroy","speed":5,"angle":{},"attract":{"rotate":{}},"gravity":{},"noise":{"delay":{"random":{}}},"outModes":{},"trail":{}},"size":{"value":5,"animation":{"enable":true,"speed":5,"minimumValue":1,"sync":true,"startValue":"min","destroy":"max"},"random":{}},"bounce":{"horizontal":{"random":{}},"vertical":{"random":{}}},"life":{"delay":{"random":{}},"duration":{"random":{}}},"number":{"density":{}},"opacity":{"animation":{},"random":{}},"rotate":{"animation":{}},"shadow":{"offset":{}},"shape":{},"stroke":{"color":{"value":"","animation":{"enable":false,"speed":0,"sync":false}}},"twinkle":{"lines":{},"particles":{}}}}}},"particles":{"bounce":{"horizontal":{"random":{"enable":false,"minimumValue":0.1},"value":1},"vertical":{"random":{"enable":false,"minimumValue":0.1},"value":1}},"collisions":{"bounce":{"horizontal":{"random":{"enable":false,"minimumValue":0.1},"value":1},"vertical":{"random":{"enable":false,"minimumValue":0.1},"value":1}},"enable":false,"mode":"bounce"},"color":{"value":["#f00","#f50"],"animation":{"enable":true,"speed":50,"sync":false}},"life":{"count":0,"delay":{"random":{"enable":false,"minimumValue":0.1},"value":1,"sync":false},"duration":{"random":{"enable":false,"minimumValue":0.1},"value":3,"sync":false}},"links":{"blink":false,"color":{"value":"random"},"consent":false,"distance":100,"enable":false,"frequency":1,"opacity":1,"shadow":{"blur":true,"color":{"value":"#00ff00"},"enable":false},"triangles":{"enable":false,"frequency":1},"width":1,"warp":false},"move":{"angle":{"offset":45,"value":90},"attract":{"enable":false,"rotate":{"x":3000,"y":3000}},"direction":"top","distance":0,"enable":true,"gravity":{"acceleration":9.81,"enable":false,"maxSpeed":50},"noise":{"delay":{"random":{"enable":false,"minimumValue":0},"value":0},"enable":false},"outModes":{"default":"out"},"random":true,"size":false,"speed":15,"straight":false,"trail":{"enable":false,"length":10,"fillColor":{"value":"#000000"}},"vibrate":false,"warp":false},"number":{"density":{"enable":true,"area":500,"factor":2000},"limit":100,"value":80},"opacity":{"random":{"enable":true,"minimumValue":0.3},"value":0.8,"animation":{"destroy":"none","enable":true,"minimumValue":0.3,"speed":0.5,"startValue":"random","sync":false}},"reduceDuplicates":false,"rotate":{"random":{"enable":true,"minimumValue":0},"value":90,"animation":{"enable":true,"speed":50,"sync":false},"direction":"random","path":false},"shadow":{"blur":0,"color":{"value":"#000000"},"enable":false,"offset":{"x":0,"y":0}},"shape":{"options":{},"type":"square"},"size":{"random":{"enable":true,"minimumValue":1},"value":7,"animation":{"destroy":"none","enable":true,"minimumValue":1,"speed":3,"startValue":"random","sync":false}},"stroke":{"width":0,"color":{"value":"","animation":{"enable":false,"speed":0,"sync":false}}},"twinkle":{"lines":{"enable":false,"frequency":0.05,"opacity":1},"particles":{"enable":false,"frequency":0.05,"opacity":1}}}}')},95:function(e,n,t){},96:function(e,n,t){}},[[333,1,2]]]);
//# sourceMappingURL=main.78d20dff.chunk.js.map